*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color:#0f172a;
  background:
    radial-gradient(1100px 650px at 15% 0%, rgba(99,102,241,.10), transparent 55%),
    radial-gradient(900px 600px at 85% 10%, rgba(236,72,153,.08), transparent 55%),
    linear-gradient(180deg, #fff, #fafafa);
}
button,input{font-family:inherit}

.card{
  background: rgba(255,255,255,.85);
  border:1px solid rgba(15,23,42,.08);
  backdrop-filter: blur(12px);
  box-shadow: 0 24px 60px rgba(2,6,23,.08);
  border-radius:22px;
}

.btnPrimary{
  border:0;
  cursor:pointer;
  font-weight:950;
  color:#fff;
  background: linear-gradient(135deg, #6366f1, #ec4899);
  box-shadow: 0 16px 34px rgba(99,102,241,.20);
  transition: transform .08s ease, filter .15s ease;
}
.btnPrimary:hover{filter:brightness(1.03)}
.btnPrimary:active{transform:translateY(1px)}

.btnSoft{
  border:1px solid rgba(15,23,42,.10);
  background: rgba(15,23,42,.05);
  cursor:pointer;
  font-weight:950;
  color:#0f172a;
}
.input{
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.92);
  outline:none;
}
.input:focus{
  border-color: rgba(99,102,241,.45);
  box-shadow: 0 0 0 5px rgba(99,102,241,.12);
}

/* START */
.startPage{min-height:100vh;display:grid;place-items:center;padding:22px}
.startWrap{width:min(980px,100%);display:grid;grid-template-columns:1.1fr .9fr;gap:18px}
@media (max-width:860px){.startWrap{grid-template-columns:1fr}}

.hero{padding:26px}
.heroTop{display:flex;align-items:center;gap:12px}
.moonLogo{
  width:46px;height:46px;border-radius:16px;display:grid;place-items:center;
  background: linear-gradient(135deg, rgba(99,102,241,.18), rgba(236,72,153,.14));
  box-shadow: 0 12px 26px rgba(2,6,23,.10);
  font-size:18px
}
.brandBig{font-weight:1000;font-size:16px}
.brandSmall{font-weight:800;color:#64748b;font-size:12px}
.heroTitle{font-size:34px;font-weight:1000;margin:12px 0 6px}
.heroSub{color:#475569;font-weight:750;line-height:1.5;margin:0}

.pills{display:flex;gap:10px;flex-wrap:wrap;margin-top:16px}
.pill{
  font-size:12px;font-weight:900;color:#334155;
  padding:8px 12px;border-radius:999px;
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.65)
}
.startCTA{padding:26px;display:flex;flex-direction:column;justify-content:center;gap:12px}
.ctaTitle{font-weight:1000;font-size:16px}
.ctaSub{color:#475569;font-weight:750;font-size:13px;line-height:1.5}
.bigBtn{height:52px;border-radius:16px;font-size:15px}
.footerNote{margin-top:12px;font-size:12px;color:#64748b;font-weight:800}

/* GENDER */
.genderPage{min-height:100vh;display:grid;place-items:center;padding:22px}
.genderCard{width:min(560px,100%);padding:22px}
.genderHeader{display:flex;align-items:center;gap:12px}
.genderTitle{font-size:22px;font-weight:1000;margin:0}
.genderDesc{margin:6px 0 0;color:#475569;font-weight:750;line-height:1.5;font-size:13px}
.genderGrid{margin-top:16px;display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
@media(max-width:520px){.genderGrid{grid-template-columns:1fr}}
.genderBtn{
  height:54px;border-radius:18px;
  display:flex;align-items:center;justify-content:center;gap:10px;
  font-size:14px;font-weight:1000;
  border:1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.85);
  cursor:pointer;
  transition: box-shadow .15s ease, transform .08s ease;
}
.genderBtn:hover{box-shadow:0 16px 30px rgba(2,6,23,.08)}
.genderBtn:active{transform:translateY(1px)}
.genderBtn.active{
  border-color: rgba(99,102,241,.45);
  box-shadow: 0 0 0 5px rgba(99,102,241,.12);
}
.genderActions{margin-top:14px}

/* CHAT */
.fullChatPage{height:100vh;overflow:hidden}
.topbar{
  position:sticky;top:0;z-index:10;
  height:64px;display:flex;align-items:center;justify-content:space-between;
  padding:0 16px;
  background:rgba(255,255,255,.75);
  backdrop-filter: blur(14px);
  border-bottom:1px solid rgba(15,23,42,.08)
}
.topLeft{display:flex;align-items:center;gap:10px;font-weight:1000}
.logoMoon{
  width:40px;height:40px;border-radius:14px;display:grid;place-items:center;
  background:linear-gradient(135deg, rgba(99,102,241,.18), rgba(236,72,153,.14));
  box-shadow: 0 10px 24px rgba(2,6,23,.10);
  font-size:18px
}
.brand{font-weight:1000}
.handleRow{display:flex;align-items:center;gap:10px;font-weight:900;color:#334155}
.greenDot{width:10px;height:10px;border-radius:99px;background:#22c55e;box-shadow:0 0 0 5px rgba(34,197,94,.12)}
.statusPill{
  font-size:12px;font-weight:1000;padding:6px 10px;border-radius:999px;
  border:1px solid rgba(15,23,42,.10);
  background: rgba(15,23,42,.04);color:#334155
}
.badge{
  font-size:12px;padding:8px 12px;border-radius:999px;
  background:rgba(15,23,42,.04);
  border:1px solid rgba(15,23,42,.08);color:#334155
}

.chatWrap{
  width:min(1100px, calc(100% - 24px));
  margin:10px auto 12px;
  height: calc(100vh - 64px - 22px);
  display:flex;flex-direction:column;gap:10px;
}
.infoBanner{padding:10px 12px;text-align:center;font-weight:850;color:#64748b}

.chatBox{
  flex:1;overflow:auto;
  padding:16px 14px;border-radius:22px;
  background:rgba(255,255,255,.70);
  backdrop-filter: blur(12px);
  border:1px solid rgba(15,23,42,.08);
  box-shadow: 0 24px 60px rgba(2,6,23,.07);
}

.msg{
  max-width:min(78%,680px);
  padding:12px 14px;border-radius:16px;margin:10px 0;
  background:rgba(15,23,42,.04);
  border:1px solid rgba(15,23,42,.08);
  color:#0f172a;line-height:1.35;font-size:14px;
  white-space:pre-wrap;word-wrap:break-word
}
.msg.mine{
  margin-left:auto;
  background:linear-gradient(135deg, rgba(99,102,241,.16), rgba(236,72,153,.12));
  border:1px solid rgba(99,102,241,.20)
}
.sys{text-align:center;font-size:12px;color:#64748b;padding:8px 8px;margin:10px 0}

.composer{
  display:flex;gap:10px;align-items:center;
  padding:12px;border-radius:18px;
  background:rgba(255,255,255,.75);
  backdrop-filter: blur(12px);
  border:1px solid rgba(15,23,42,.08);
  box-shadow: 0 18px 50px rgba(2,6,23,.06);
}
.msgInput{
  flex:1;height:46px;border-radius:14px;
  padding:0 14px;font-size:14px
}
.sendBtn,.newChatBtn{height:46px;border-radius:14px;padding:0 16px}

.overlay{
  position:fixed;inset:0;display:flex;align-items:center;justify-content:center;
  background:rgba(2,6,23,.45);backdrop-filter: blur(8px);z-index:50
}
.modal{
  width:min(520px, calc(100vw - 32px));
  border-radius:22px;padding:18px;background:rgba(255,255,255,.92);
  border:1px solid rgba(15,23,42,.10);
  box-shadow:0 30px 80px rgba(2,6,23,.25);
  text-align:center
}
.modalTitle{font-weight:1000;font-size:18px;margin:0}
.modalSub{margin:8px 0 0;color:#475569;font-weight:750;font-size:13px}
.modalBtn{margin-top:14px;height:44px;border-radius:14px;padding:0 16px}

@media(max-width:700px){
  .badge{display:none}
  .chatWrap{width:calc(100% - 16px);margin:8px auto 10px;height:calc(100vh - 64px - 18px)}
  .msg{max-width:88%}
}

/* ===== Chat bubble auto-fit fix ===== */
.message {
  width: fit-content;
  max-width: 72%;
  padding: 12px 16px;
  border-radius: 18px;
  line-height: 1.4;
  word-wrap: break-word;
  white-space: pre-wrap;
}

.message.self {
  margin-left: auto;
}

.message.other {
  margin-right: auto;
}

/* Mobile polish */
@media (max-width: 600px) {
  .message {
    max-width: 85%;
  }
}

/* ===== FORCE chat bubbles to auto-fit text (override) ===== */

/* Common bubble class names */
.message, .msg, .bubble, .chatBubble, .msgBubble, .messageBubble, .chat-bubble, .chat_message, .chatMessage {
  width: fit-content !important;
  max-width: 72% !important;
  display: inline-block !important;
  white-space: pre-wrap !important;
  overflow-wrap: anywhere !important;
  word-break: break-word !important;
}

/* If your messages are inside a list/container, force children to not be full width */
#messages > *, #chatMessages > *, .messages > *, .chatMessages > *, .chatLog > *, .chatArea > * {
  width: auto !important;
}

/* Align typical "self" message wrappers to right */
.self, .me, .mine, .outgoing {
  margin-left: auto !important;
  justify-content: flex-end !important;
  text-align: left !important;
}

/* Align typical "other" message wrappers to left */
.other, .them, .incoming {
  margin-right: auto !important;
  justify-content: flex-start !important;
  text-align: left !important;
}

/* Mobile: allow a bit wider */
@media (max-width: 600px) {
  .message, .msg, .bubble, .chatBubble, .msgBubble, .messageBubble, .chat-bubble, .chat_message, .chatMessage {
    max-width: 85% !important;
  }
}


/* ===== FIX: messages stacking vertically ===== */

/* Force each message row to be its own line */
.messageRow,
.msgRow,
.chatRow,
.messageWrapper,
.msgWrapper,
.chatMessageWrapper,
.chat-line,
.chatLine {
  display: flex !important;
  width: 100% !important;
  margin-bottom: 12px !important;
}

/* Incoming (left) */
.messageRow.other,
.msgRow.other,
.chatRow.other {
  justify-content: flex-start !important;
}

/* Outgoing (right) */
.messageRow.self,
.msgRow.self,
.chatRow.self {
  justify-content: flex-end !important;
}

/* Bubble stays auto-size */
.message,
.msg,
.bubble,
.chatBubble,
.msgBubble {
  width: fit-content !important;
  max-width: 70% !important;
  padding: 10px 14px !important;
  border-radius: 18px !important;
  white-space: pre-wrap !important;
  word-break: break-word !important;
}

/* Mobile */
@media (max-width: 600px) {
  .message,
  .msg,
  .bubble,
  .chatBubble,
  .msgBubble {
    max-width: 85% !important;
  }
}

